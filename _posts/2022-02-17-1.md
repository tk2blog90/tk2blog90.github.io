---
layout: post
title: Angular로 Cordova 안드로이드 하이브리드앱 만들기
subject: Dev
keywords: Application, 앱, 어플리케이션, 안드로이드, Angular, 앵귤러, 코도바, 하이브리드앱, android, cordova
---

웹 기술이 발전하며 자바스크립트는 인기있는 언어 중 하나로 부상했고, 그만큼 많은 발전이 이뤄진 언어기도 하다.
[Angular](https://angular.io/){:target="_blank" rel="nofollow noopener noreferrer"}나
[Vue](https://kr.vuejs.org/v2/guide/index.html){:target="_blank" rel="nofollow noopener noreferrer"},
[React](https://ko.reactjs.org/){:target="_blank" rel="nofollow noopener noreferrer"},
[Svelte](https://svelte.dev/){:target="_blank" rel="nofollow noopener noreferrer"} 등의 프레임워크들이 탄생했고
웹을 넘어서 크로스 플랫폼 어플리케이션 개발을 위한 [Electron](https://www.electronjs.org/){:target="_blank" rel="nofollow noopener noreferrer"}이나
모바일앱 개발을 위한 [Cordova](https://cordova.apache.org/){:target="_blank" rel="nofollow noopener noreferrer"} 같은
프레임워크도 나타나게 되었다.

JQuery도 한 때 훌륭한 라이브러리였지만
더 이상 JQuery는 어디 명함도 못 내밀 만큼의 눈부신 발전이 이뤄진 것이다.

오늘은 이 훌륭한 기술의 힘을 빌려 Angular와 Cordova를 통한 안드로이드 하이브리드앱을 만드는 법을 알아볼까 한다.
이에 관한 내용은 아래 글에서 얻어왔다.

{% capture url %}{{ "https://medium.com/@christof.thalmann/convert-angular-project-to-android-apk-in-10-steps-c49e2fddd29" }}{% endcapture %}
{% capture name %}{{ "Convert Angular Webapp to Android APK in 10 steps" }}{% endcapture %}
{% capture thumbnail %}{{ "https://miro.medium.com/max/1200/1*TShSyb2O8PkhQtsRLvTJCg.jpeg" }}{% endcapture %}
{% include site-link.html %}

# Cordova ?

Cordova는 앞서 언급했듯 모바일앱 개발을 위한 프레임워크인데,
HTML, CSS, JavaScript 같은 웹 기술을 이용해 하이브리드앱을 만들 수 있게 해준다.
하이브리드앱이기 때문에 결과물의 성능은 네이티브앱보다 떨어지지만
웹 개발자가 앱 개발을 위해 새롭게 뭔갈 배워야하는 노력을
적게 투자해도 된다는 장점이 있다.

전에 어디서 요즘은 빠른 개발속도 때문에 하이브리드앱이 대세라는 글을 본 것 같은데,
[Flutter](https://flutter.dev/){:target="_blank" rel="nofollow noopener noreferrer"}로 네이티브앱을 건드려보니
확실히 네이티브는 네이티브만의 장점이 있었다.

# Cordova 설정

## Cordova 프로젝트 생성

우선 첫 시작은 Cordova 프로젝트를 생성하는 것이다.
Cordova는 아래 명령어로 프로젝트를 생성한다.
당연하지만 아래 명령어를 실행하기 전 `npm i -g cordova` 명령어로
반드시 Cordova cli를 사용할 수 있도록 설치하는게 우선이다.

```bash
cordova create {path} {id} {name}
```

- `{path}`: Cordova 프로젝트가 생성될 폴더 명.
- `{id}`: Cordova 앱 ID. `com.example.app` 같은 형태로 작성된다.
- `{name}`: Cordova 앱 이름.

## 안드로이드 플랫폼 추가

프로젝트가 생성되고 나면 프로젝트 폴더 안으로 들어간 뒤 아래 명령어를 통해
안드로이드 플랫폼을 추가해주자.

```bash
cordova platform add android
```

[![폴더구조](/assets/images/structure.png)](/assets/images/structure.png){:target="_blank"}

완료하고 나면 이런 폴더 구조가 된다.
여기서 중요한 것은 `www` 폴더이니 기억해두자.

# Angular 설정

## Angular 프로젝트 빌드

Angular 프로젝트에서 해줄 일은 프로젝트를 빌드해주는 일 뿐이다.
대신 빌드할 때 아래 명령어로 빌드해주자.

```bash
ng build --base-href=./
```

글 서문에서 소개한 포스팅의 경우
빌드할 때 `--aot` 옵션을 주라고 돼있는데
Angular 9 이후로 `aot`는 기본값이 되었기 때문에 줄 필요가 없다.

그리고 소개한 포스팅에선 `tsconfig.json`에서 `compilerOptions.target`을 `ES5`로 바꿔줘야 한다는데,
Angular 13.2.0, Cordova 11.0.0 기준으로 해당 조치는 할 필요가 없었다.

## Angular 프로젝트 복사

다음은 Angular 프로젝트를 Cordova 프로젝트에 복사해주는 일이다.
앞서 말한 `www` 폴더 내에 Angular 프로젝트 빌드 결과물을 복붙해주자.
이때, `index.html` 파일이 아래처럼 `www` 폴더 바로 아래에 오도록 붙여넣어야한다.

[![폴더 구조 2](/assets/images/structure-2.png)](/assets/images/structure-2.png){:target="_blank"}

# Cordova 프로젝트 빌드

마지막으로 남은 일은 Cordova 프로젝트를 빌드해주는 것이다.
Cordova 프로젝트 폴더 내에서 아래 명령어를 실행하자.

```bash
cordova build android
```

이렇게 하면 빌드가 완료된다.

빌드 과정에서 에러가 발생할 수도 있다.
내 경우는 **No installed build tools found** 혹은 **No usable Android build tools found** 라는 에러가 발생했었는데,
`30.0.3` 이상, `31.0.0` 이하의 Android build tool이 없어서 발생한 에러였다.
Android Studio를 열어 적합한 Android build tool을 설치해주면 해결된다.

에러 메시지는 최소 요구 버전 이상의 Android build tool이 없다는 말만 반복하는데
`cordova.gradle` 파일을 까보니 최소 요구버전에서 +1 메이저버전 까지만 허용하고 있었다. 😠
이걸 보며 혼자 개발하는게 아닌 이상 에러 메시지는 정확해야한다는 생각을 했다.. 

# 앱 실행

마지막 앱 실행은 `cordova emulate android` 혹은 `cordova run android`를 하면 되는데
그지같은 명령어가 윈도우 시스템에서 먹히질 않는다 ^^

이것도 한참 헤맸었는데, 찾아보니 위 명령어들은 실행 과정에서 `gradlew` 라는 파일을 실행한다는 것 같았다.
근데 이 파일이 Linux 혹은 Mac OS용 `gradlew` 파일과 윈도우용 `gradlew.bat` 파일이 있는데
명령어들이 윈도우 시스템에서도 `gradlew` 파일을 자꾸 실행하는 것 ....

그래서 해결 방법은 [Git bash](https://gitforwindows.org/){:target="_blank" rel="nofollow noopener noreferrer"}
를 이용해 명령어를 실행하든가,
`platform/android` 폴더를 Android Studio로 연 뒤 Android Studio의 Run이나 Debug 기능을 이용하면 된다.

# 마무리

소개한 포스팅에선 Angular 8과 Cordova 9로 진행했었기 때문에 최신 버전에선 안 먹힐까봐 걱정했는데 
다행히 Angular와 Cordova 최신 버전에서 정상적으로 실행이 되었다.

Flutter로 앱을 만들어보고 난 뒤에 써봐서 그런가
확실히 성능이 좀 버벅거리는 느낌이 들긴 한데 ..
네이티브앱 개발할 때 처럼 복잡한 설정을 일일히 해줄 필요 없이
웹에서 하던 그대로 해도 된다는 건 정말 엄청난 장점이 아닌가 싶다.

개발의 지평이 더 넓어지길 !
