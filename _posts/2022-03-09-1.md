---
layout: post
title: Use svg icons in Angular
subject: Dev
keywords: svg, icon, Angular, Angular2+
---

When developing a website, you may use various icons with svg, png, font, or other formats.
But the most powerful format for icon is svg I think.

# Why SVG icon is powerful?

## Resizable

If you use png, jpeg, or other image format for your icon,
you may need to create multiple image files to accommodate icons of different sizes.
This is because these image formats may look abnormal when enlarged or reduced.

## Colorable

Unlike the image formats mentioned above, if you use svg or font, you can change the icon color with css.
There's no need to create multiple files of various colors.

## Scalable

The type of icon required may vary. More icons may be required, or icons may be no longer used. 
If you use font format icons, this process can be quite complicated.
But if you use the svg icon, you can do it just by adding or removing the svg code.

# IconModule

So, let's talk about the `IconModule` which makes you use svg icons for your Angular project.
Create `IconModule` and `IconComponent` with following command.

```bash
ng g m icon && ng g c icon
```

After running the above command, you can see the followings:

```
icon.component.html
icon.component.scss
icon.component.spec.ts
icon.component.ts
icon.module.ts
```

## IconDefinitions

Now create `IconDefinitions` in the same directory with naming `icon-defs.ts`.
The content of `icon-defs.ts` is,

```typescript
export enum IconDefinitions { }
```

You can use the key/value pairs for specific icon.
The key will be icon name, and value will be svg code.

## IconComponent

The content of `icon.component.ts` should be,

```typescript
import {AfterViewInit, Component, ElementRef, HostBinding, Input, OnInit, Renderer2} from '@angular/core';
import {IconDefinitions} from './icon-defs';

@Component({
  selector: 'app-icon',
  templateUrl: './icon.component.html',
  styleUrls: ['./icon.component.scss']
})
export class IconComponent implements OnInit, AfterViewInit {
  /**
   * set icon name
   * @param name name
   */
  @Input() set name(name: keyof typeof IconDefinitions | undefined) {
    this._name = name;
    this._setIcon();
  }

  /**
   * bind name to attribute
   */
  @HostBinding('attr.icon-name') get bindName(): keyof typeof IconDefinitions | undefined {
    return this._name;
  }

  /**
   * name of icon
   */
  private _name: keyof typeof IconDefinitions | undefined;

  /**
   * svg element from `icon-defs.ts`
   */
  private _icon: SVGElement | undefined;

  constructor(
    private renderer: Renderer2,
    private elementRef: ElementRef<HTMLElement>,
  ) { }

  ngOnInit(): void {
  }

  ngAfterViewInit(): void {
    this._setIcon();
  }

  /**
   * set icon with name
   */
  private _setIcon(): void {
    this._removeExistingIcon();
    this._parseSvgIcon();
    this._appendSvgToView();
  }

  /**
   * remove existing icon from element
   */
  private _removeExistingIcon(): void {
    if (this._icon && this.elementRef?.nativeElement) {
      this.renderer.removeChild(this.elementRef.nativeElement, this._icon);
    }
  }

  /**
   * parse svg icon to element
   */
  private _parseSvgIcon(): void {
    if (this._name) {
      const domParser = new DOMParser();
      const html = domParser.parseFromString(IconDefinitions[this._name], 'text/html');

      this._icon = html.querySelector('svg') as SVGElement;
    }
  }

  /**
   * append svg icon to view
   */
  private _appendSvgToView(): void {
    if (this._icon && this.elementRef?.nativeElement) {
      this.renderer.appendChild(this.elementRef.nativeElement, this._icon);
    }
  }
}
```

The content of `icon.component.scss` should be,

```scss
:host {
  display: block;
}

:host {
  ::ng-deep {
    svg {
      width: 100%;
      height: 100%;
      display: block;
    }
  }
}
```

The content of `icon.component.html` should be empty.

# Usage

```typescript
export enum IconDefinitions {
  // Define the icon
  'add' = `
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
      <path id="ic_add_24px" d="M29,18.714H18.714V29H15.286V18.714H5V15.286H15.286V5h3.429V15.286H29Z" transform="translate(-5 -5)" fill="#c4c4c4"/>
    </svg>
  `,
}
```

```html
<app-icon name="add"></app-icon>
```

# Conclusion

With this module, you can easily add/remove the icons to use.
Also, the size and color can be controlled by css.
The code support for available icon name will be provided too.
